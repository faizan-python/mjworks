{% extends "templates/base.html" %}

{% load staticfiles %}

{% block content %}
<form id="central">
<div class="side-body">
<div class="page-title">
    <span class="title">Customer Overview</span>
    <div class="description"></div>
</div>
    <div class="row">
        <div class="col-xs-12">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="title">Customer Details</div>
                    </div>
                </div>
                <div class="card-body">
                    <form class="form-inline">
                        <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">First Name: </label>&nbsp;&nbsp;
                            {{customer.first_name|title|default:"NA"}}
                        </div>
                        <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">Last Name: </label>&nbsp;&nbsp;
                            {{customer.last_name|title|default:"NA"}}
                        </div>
                        <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">Email: </label>&nbsp;&nbsp;
                            {{customer.email|default:"NA"|default_if_none:"NA"}}
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail2">Contact Number:</label>&nbsp;&nbsp;
                            {{customer.phone_number}}
                        </div>
                            <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">Gender:</label>&nbsp;&nbsp;
                            {{customer.gender|title|default:"NA"}}
                            </div>
                        <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">Address: </label>&nbsp;&nbsp;
                            {{customer.address|title|default:"NA"}} 
                        </div>
                        <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">Pending Amount: </label>&nbsp;&nbsp;
                            $ {{customer.total_pending}} 
                        </div>
                        <div class="form-group" style="padding-right:5em;">
                            <label for="exampleInputEmail2">Total Service Done: </label>&nbsp;&nbsp;
                            {{customer.service_set.all|length}} 
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
<!--     Customers Vehicals -->
    <div class="row">
        <div class="col-xs-12">
            <div class="card">
                <div class="card-header">

                    <div class="card-title">
                    <div class="title">Service Details</div>
                    </div>
                </div>
                <div class="card-body">
                    <table class="datatable table table-striped" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Vehicle Number</th>
                                <th>Vehicle Name</th>
                                <th>Last Serviced</th>
                                <th>Vehicle Color</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Vehicle Number</th>
                                <th>Vehicle Name</th>
                                <th>Last Serviced</th>
                                <th>Vehicle Color</th>
                                <th>Action</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            {% for vehical in customer.vehical_set.all %}
                            <tr>
                                <td>{{vehical.vehical_number}}</td>
                                <td>{{vehical.vehical_name|title}}</td>
                                <td>{{vehical.last_serviced_date }}</td>
                                <td>{{vehical.vehical_colour}}</td>
                                <td>
                                    <div aria-label="Extra-small button group" role="group" class="btn-group btn-group-xs">
                                      <a class="btn btn-default customerbutton" href="" id={{service.invoice_number}} value="view" type="button">View</a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
<!--     Customers Service details --> 
<div class="row">
        <div class="col-xs-12">
            <div class="card">
                <div class="card-header">

                    <div class="card-title">
                    <div class="title">Service Details</div>
                    </div>
                </div>
                <div class="card-body">
                    <table class="datatable table table-striped" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Invoice Number</th>
                                <th>Vehicle</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Total Paid</th>
                                <th>Total Pending</th>
                                <th>Serviced</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Invoice Number</th>
                                <th>Vehicle</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Total Paid</th>
                                <th>Total Pending</th>
                                <th>Serviced</th>
                                <th>Action</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            {% for service in customer.service_set.all %}
                            <tr>
                                <td>{{service.invoice_number}}</td>
                                <td>{{service.vehical}}</td>
                                <td>{{service.customer|title }}</td>
                                <td>{{service.service_date}}</td>
                                <td>$ {{service.total_paid}}</td>
                                <td>$ {{service.total_pending}}</td>
                                {% if service.is_serviced %}
                                    <td> Yes </td>
                                {% else %}
                                   <td> No </td>
                                {% endif %}
                                <td>
                                    <div aria-label="Extra-small button group" role="group" class="btn-group btn-group-xs">
                                      <a class="btn btn-default customerbutton" href="{% url 'service:service_view' service.invoice_number%}" id={{service.invoice_number}} value="view" type="button">View</a>
                                      <a class="btn btn-default customerbutton" href="" id={{service.invoice_number}} value="view" type="button">Edit</a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}
